const confettiCount=35,sequinCount=10,gravityConfetti=.3,gravitySequins=.55,dragConfetti=.075,dragSequins=.02,terminalVelocity=2.8,button=document.getElementById("button");var disabled=!1;const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;let cx=ctx.canvas.width/2,cy=ctx.canvas.height/2,confetti=[],sequins=[];const colors=[{front:"#0000ff",back:"#ffffff"},{front:"#EA4630",back:"#3225de"},{front:"#165B33",back:"#0ca90c"}];randomRange=(a,b)=>Math.random()*(b-a)+a,initConfettoVelocity=(a,b)=>{const c=randomRange(a[0],a[1]),d=b[1]-b[0]+1;let e=b[1]-Math.abs(randomRange(0,d)+randomRange(0,d)-d);return e>=b[1]-1&&(e+=.25>Math.random()?randomRange(1,3):0),{x:c,y:-e}};function Confetto(){this.randomModifier=randomRange(0,99),this.color=colors[Math.floor(randomRange(0,colors.length))],this.dimensions={x:randomRange(5,9),y:randomRange(8,5)},this.position={x:randomRange(canvas.width/2-button.offsetWidth/4,canvas.width/2+button.offsetWidth/4),y:randomRange(canvas.height/2+button.offsetHeight/2+8,canvas.height/2+1.5*button.offsetHeight-8)},this.rotation=randomRange(0,2*Math.PI),this.scale={x:1,y:1},this.velocity=initConfettoVelocity([0,25],[-5,10])}Confetto.prototype.update=function(){this.velocity.x-=this.velocity.x*dragConfetti,this.velocity.y=Math.min(this.velocity.y+gravityConfetti,terminalVelocity),this.velocity.x+=.5<Math.random()?Math.random():-Math.random(),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.scale.y=Math.cos(.09*(this.position.y+this.randomModifier))};function Sequin(){this.color=colors[Math.floor(randomRange(0,colors.length))].back,this.radius=randomRange(1,2),this.position={x:randomRange(canvas.width/2-button.offsetWidth/3,canvas.width/2+button.offsetWidth/3),y:randomRange(canvas.height/2+button.offsetHeight/2+8,canvas.height/2+1.5*button.offsetHeight-8)},this.velocity={x:randomRange(-6,6),y:randomRange(-8,-12)}}Sequin.prototype.update=function(){this.velocity.x-=this.velocity.x*dragSequins,this.velocity.y+=gravitySequins,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y},initBurst=()=>{for(let a=0;a<confettiCount;a++)confetti.push(new Confetto);for(let a=0;a<sequinCount;a++)sequins.push(new Sequin)},render=()=>{ctx.clearRect(0,0,canvas.width,canvas.height),confetti.forEach(a=>{let b=a.dimensions.x*a.scale.x,c=a.dimensions.y*a.scale.y;ctx.translate(a.position.x,a.position.y),ctx.rotate(a.rotation),a.update(),ctx.fillStyle=0<a.scale.y?a.color.front:a.color.back,ctx.fillRect(-b/2,-c/2,b,c),ctx.setTransform(1,0,0,1,0,0),0>a.velocity.y&&ctx.clearRect(canvas.width/2-button.offsetWidth/2,canvas.height/2+button.offsetHeight/2,button.offsetWidth,button.offsetHeight)}),sequins.forEach(a=>{ctx.translate(a.position.x,a.position.y),a.update(),ctx.fillStyle=a.color,ctx.beginPath(),ctx.arc(0,0,a.radius,0,1*Math.PI),ctx.fill(),ctx.setTransform(1,0,0,1,0,0),0>a.velocity.y&&ctx.clearRect(canvas.width/2-button.offsetWidth/2,canvas.height/2+button.offsetHeight/2,button.offsetWidth,button.offsetHeight)}),confetti.forEach((a,b)=>{a.position.y>=canvas.height&&confetti.splice(b,1)}),sequins.forEach((a,b)=>{a.position.y>=canvas.height&&sequins.splice(b,1)}),window.requestAnimationFrame(render)},clickButton=()=>{disabled||(disabled=!0,setTimeout(()=>{setTimeout(()=>{window.initBurst(),setTimeout(()=>{disabled=!1},0)},0)},0))},resizeCanvas=()=>{canvas.width=window.innerWidth,canvas.height=window.innerHeight,cx=ctx.canvas.width/2,cy=ctx.canvas.height/2},window.addEventListener("resize",()=>{resizeCanvas()}),document.body.onkeyup=a=>{(13==a.keyCode||32==a.keyCode)&&clickButton()},window.initBurst();function myFunction(){var a=.5,b=Math.floor(Math.random()*(15-a+1)+a);window.initBurst(),setTimeout(myFunction,100*b)}myFunction(),render();